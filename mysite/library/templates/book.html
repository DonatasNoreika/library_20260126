{% extends "base.html" %}

{% block title %}Knyga{% endblock %}

{% block content %}
{% if book.cover %}
<img class="card-img-top mb-3 rounded" src="{{ book.cover.url }}" style="max-width: 20%" alt="...">
{% endif %}
<h1>Knyga "{{ book.title }}"</h1>
<p>Autorius: {{ book.author }}</p>
<p>ISBN: {{ book.isbn }}</p>
<p>Žanrai: {{ book.display_genre }}</p>
<p>{{ book.summary }}</p>

<h3>Komentarai:</h3>
{% if user.is_authenticated %}
<form method="post" class="mb-2">
    {% csrf_token %}
    {% load crispy_forms_tags %}
    {{ form | crispy }}
    <button type="submit" class="btn btn-primary">Paskelbti</button>
</form>
{% endif %}
{% for review in book.reviews.all %}
<p><strong>{{ review.reviewer }}</strong>, <em>{{ review.date_created }}</em></p>
<p>{{ review.content }}</p>
<hr>
{% empty %}
<p>Komentarų nėra</p>
{% endfor %}

<h3>Kopijos:</h3>
{% for instance in book.bookinstances.all %}

<p>{{ instance.uuid }}</p>

{% if instance.due_back %}
<p>Bus grąžinta: {{ instance.due_back }}</p>
{% endif %}

<p class="{% if instance.status == 't' %}text-danger{% elif instance.status == 'a' %}text-success{% elif instance.status == 'r' %}text-warning{% endif %}">
    {{ instance.get_status_display }}
</p>

<hr>

{% empty %}
<p>Šios knygos kopijų neturime</p>
{% endfor %}
{% endblock %}